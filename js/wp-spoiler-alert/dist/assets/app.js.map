{"version":3,"file":"app.js","sources":["webpack:///./app/main.js","webpack:///external \"jQuery\"","webpack:///./app/app.js","webpack:///./app/components/OptionsPage.js","webpack:///./~/react/react.js","webpack:///./app/config.js","webpack:///./app/ext/ArrowApi.js","webpack:///./app/stores/options.js","webpack:///./app/components/Notice.js","webpack:///./app/components/OptionsForm.js","webpack:///./app/styles/app.css"],"names":[],"mappings":";;;;;;;AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAiB,mCAAmC;AACpD;AACA;AACA,EAAC;;;;;;;;;;;ACbD,yB;;;;;;;;;ACAA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;ACpBA;AACA;AACA;AACA;;AAEA,sCAAqC;AACrC;AACA;AACA,gBAAe;AACf;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB,oBAAmB,eAAe;AAClC,IAAG;;AAEH;AACA;AACA;AACA;AACA,wBAAuB,uBAAuB;AAC9C,mBAAkB,0BAA0B;AAC5C,wBAAuB,yDAAyD;AAChF;AACA;AACA;AACA;;AAEA,EAAC;;AAED;;;;;;;;;;;AC/BA;;;;;;;;;;ACAA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;;;AAGA;;;;;;;;;;;AC9BA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB;AACA,IAAG;;AAEH;AACA,mBAAkB;AAClB;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;;AAEA;;AAEA;AACA;;;;;;;;;;AC/HA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;;AAEA;;AAEA;;;;;;;;;;AC/BA;;AAEA;;AAEA,iCAAgC;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAG;;AAEH;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,wBAAuB,8CAA8C;AACrE,wBAAuB,6BAA6B;AACpD;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,EAAC;;AAED,sCAAqC;;AAErC;AACA;AACA,oBAAmB,WAAW;AAC9B;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;;AAEH,EAAC;;AAED;;;;;;;;;;ACjGA;AACA;AACA;;AAEA,sCAAqC;AACrC;;AAEA;AACA;AACA,IAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA;AACA,IAAG;;AAEH;AACA;AACA,IAAG;;AAEH;AACA;AACA,uBAAsB,4BAA4B;AAClD,0BAAyB,wBAAwB;AACjD;AACA;AACA,6BAA4B,aAAa;AACzC,kCAAiC,eAAe;AAChD;AACA;AACA,kCAAiC,yEAAyE;AAC1G;AACA;AACA;AACA,6BAA4B,aAAa;AACzC,kCAAiC,mBAAmB;AACpD;AACA;AACA,kCAAiC,qFAAqF;AACtH;AACA;AACA;AACA,6BAA4B,aAAa;AACzC,kCAAiC,mBAAmB;AACpD;AACA;AACA,kCAAiC,mFAAmF;AACpH;AACA;AACA;AACA,6BAA4B,aAAa;AACzC,kCAAiC,kBAAkB;AACnD;AACA;AACA,kCAAiC,sFAAsF;AACvH;AACA;AACA;AACA;AACA,sBAAqB,oBAAoB;AACzC,4BAA2B,0FAA0F;AACrH;AACA,4BAA2B,yGAAyG;AACpI;AACA;AACA;AACA;AACA,EAAC;;AAED;;;;;;;;;;;;;AC1FA,0C","sourcesContent":["/** @jsx React.DOM */\nvar $            = require('jquery');\nvar React        = require('react');\nvar OptionsPage  = require('./components/OptionsPage');\nvar optionsStore = require('./app').optionsStore;\n\n$(document).ready(function() {\n  $('.wrap-static').remove();\n\n  React.renderComponent(\n    OptionsPage({options: optionsStore.getOptions()}),\n    document.getElementById('wp-spoiler-alert-app')\n  );\n});\n\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/main.js\n ** module id = 0\n ** module chunks = 1\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 1\n ** module chunks = 1\n **/","/** @jsx React.DOM */\n\nrequire('./styles/app.css');\n\nvar ArrowApi = require('./ext/ArrowApi').ArrowApi;\nvar Config   = require('./config');\nvar Options  = require('./stores/options');\n\n/* app initialization */\nvar pluginSlug   = 'wp_spoiler_alert';\nvar config       = new Config(pluginSlug);\nvar configParams = config.getParams();\nvar api          = new ArrowApi(configParams);\nvar optionsStore = new Options(configParams, api);\n\nmodule.exports = {\n  pluginSlug   : pluginSlug,\n  api          : api,\n  config       : config,\n  optionsStore : optionsStore\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/app.js\n ** module id = 2\n ** module chunks = 1\n **/","/** @jsx React.DOM */\nvar React       = require('react');\nvar Notice      = require('./Notice');\nvar OptionsForm = require('./OptionsForm');\n\nvar OptionsPage = React.createClass({displayName: 'OptionsPage',\n  getInitialState: function() {\n    return {\n      notice: { type: '', value: '' }\n    };\n  },\n\n  onNotice: function(type, value) {\n    var notice = { type: type, value: value };\n    this.setState({notice: notice});\n  },\n\n  render: function() {\n    return (\n      React.DOM.div(null, \n        React.DOM.h2(null, \"WP-Spoiler-Alert Settings\"), \n        React.DOM.div({id: \"wp-spoiler-alert\"}, \n          Notice({notice: this.state.notice}), \n          OptionsForm({options: this.props.options, noticeChange: this.onNotice})\n        )\n      )\n    );\n  }\n\n});\n\nmodule.exports = OptionsPage;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/components/OptionsPage.js\n ** module id = 3\n ** module chunks = 1\n **/","module.exports = require('./lib/React');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/react/react.js\n ** module id = 5\n ** module chunks = 1\n **/","var Config = function(configKey) {\n  this.configKey = configKey;\n  this.load();\n};\n\nConfig.prototype = {\n\n  load: function() {\n    this.params = window[this.configKey].options;\n  },\n\n  getParam: function(name) {\n    return this.params[name];\n  },\n\n  getParams: function() {\n    return this.params;\n  },\n\n  translate: function(name) {\n    if (this.params.hasOwnProperty(name)) {\n      return this.params[name];\n    } else {\n      return name;\n    }\n  }\n\n};\n\n\nmodule.exports = Config;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/config.js\n ** module id = 6\n ** module chunks = 1\n **/","var $           = require('jquery');\nvar Promise     = require('es6-promise').Promise;\n\nvar PromiseHandler = function(ajaxPromise) {\n  ajaxPromise\n    .then(this.onAjaxSuccess.bind(this))\n    .fail(this.onAjaxFailure.bind(this));\n};\n\nPromiseHandler.prototype = {\n\n  handle: function(resolve, reject) {\n    this.resolve = resolve;\n    this.reject  = reject;\n  },\n\n  onAjaxSuccess: function(response) {\n    if (response === '0') {\n      this.reject('not_logged_in');\n    } else if (response.success) {\n      this.resolve(response.data);\n    } else {\n      this.reject(response.data.error);\n    }\n  },\n\n  onAjaxFailure: function(response) {\n    var error;\n    if (response.statusText === 'timeout') {\n      error = 'request_timeout';\n    } else if (response.responseJSON) {\n      error = response.responseJSON.data.error;\n    } else {\n      /* TODO: do some basic parsing of the HTML response */\n      error = 'unknown_response';\n    }\n\n    this.reject(error);\n  }\n\n};\n\nvar ArrowApi = function(config) {\n  this.config = config;\n};\n\nArrowApi.prototype = {\n\n  urlFor: function(controller, operation) {\n    var params        = {};\n    params.controller = controller;\n    params.operation  = operation;\n    params.nonce      = this.config.nonce;\n\n    var apiEndpoint = this.config.apiEndpoint;\n    var queryParams = $.param(params);\n\n    if (apiEndpoint.indexOf('?') === -1) {\n      return apiEndpoint + '?' + queryParams;\n    } else {\n      return apiEndpoint + '&' + queryParams;\n    }\n  },\n\n  paramsFor: function(controller, operation, params) {\n    if (typeof params !== 'object') {\n      params = {};\n    }\n\n    params.url = this.urlFor(controller, operation);\n\n    if (params.type === 'POST' && params.hasOwnProperty('data')) {\n      if (typeof params.data !== 'string') {\n        params.data = JSON.stringify(params.data);\n      }\n    }\n\n    return params;\n  },\n\n  request: function(controller, operation, params) {\n    params      = this.paramsFor(controller, operation, params);\n\n    var ajaxPromise = $.ajax(params);\n    var handler     = new PromiseHandler(ajaxPromise);\n    var handle      = handler.handle.bind(handler);\n    var promise     = new Promise(handle);\n\n    return promise;\n  },\n\n  all: function(resource) {\n    var params = { type: 'GET' };\n    return this.request(resource, 'all', params);\n  },\n\n  get: function(resource, data) {\n    var params = { type: 'GET', data: data };\n    return this.request(resource, 'get', params);\n  },\n\n  post: function(resource, data) {\n    var params = { type: 'POST', data: data };\n    return this.request(resource, 'post', params);\n  },\n\n  put: function(resource, data) {\n    var params = { type: 'POST', data: data };\n    return this.request(resource, 'put', params);\n  },\n\n  patch: function(resource, data) {\n    var params = { type: 'POST', data: data };\n    return this.request(resource, 'patch', params);\n  },\n\n  delete: function(resource, data) {\n    if (!data) {\n      data = {};\n    }\n    var params = { type: 'POST', data: data };\n    return this.request(resource, 'delete', params);\n  }\n\n};\n\nexports.ArrowApi       = ArrowApi;\nexports.PromiseHandler = PromiseHandler;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/ext/ArrowApi.js\n ** module id = 8\n ** module chunks = 1\n **/","var OptionsStore = function(options, api) {\n  this.options = options;\n  this.api     = api;\n};\n\nOptionsStore.prototype = {\n\n  getOptions: function() {\n    return this.options;\n  },\n\n  save: function(options) {\n    var promise = this.api.patch('options', options);\n    var self = this;\n\n    return promise.then(function(json) {\n      self.options = json;\n    });\n  },\n\n  reset: function() {\n    var promise = this.api.delete('options');\n    var self = this;\n\n    return promise.then(function(json) {\n      self.options = json;\n    });\n  }\n\n};\n\nmodule.exports = OptionsStore;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/stores/options.js\n ** module id = 9\n ** module chunks = 1\n **/","/** @jsx React.DOM */\n\nvar React = require('react');\n\nvar Notice = React.createClass({displayName: 'Notice',\n\n  getDefaultProps: function() {\n    return {\n      notice: {\n        type: '',\n        value: ''\n      }\n    };\n  },\n\n  hasNotice: function() {\n    return !!this.props.notice.type;\n  },\n\n  getClassList: function() {\n    return 'updated ' + this.props.notice.type;\n  },\n\n  valueToMessages: function(value) {\n    var messages = [];\n    valueType = typeof(value);\n\n    if (valueType === 'string') {\n      /* plain text error */\n      messages.push(value);\n    } else if (valueType === 'object') {\n      /* list of errors, field => error */\n      messages.push.apply(messages, this.fieldsToMessages(value));\n    } else if (valueType === 'array') {\n      messages.push.apply(messages, value);\n    } else if (value instanceof Error) {\n      messages.push(value.toString());\n    } else {\n      messages.push('Unknown Error: ' + value);\n    }\n\n    return messages;\n  },\n\n  fieldsToMessages: function(fields) {\n    var messages = [];\n    for (var field in fields) {\n      if (fields.hasOwnProperty(field)) {\n        var errors = fields[field];\n        messages.push.apply(messages, errors);\n      }\n    }\n\n    return messages;\n  },\n\n  getMessages: function() {\n    if (this.hasNotice()) {\n      return this.valueToMessages(this.props.notice.value);\n    } else {\n      return [];\n    }\n  },\n\n  render: function() {\n    if (this.hasNotice()) {\n      return (\n        React.DOM.div({id: \"message\", className: this.getClassList()}, \n          MessageList({messages: this.getMessages()})\n        )\n      );\n    } else {\n      return (React.DOM.div(null));\n    }\n  }\n});\n\nvar MessageList = React.createClass({displayName: 'MessageList',\n\n  renderMessage: function(message, index) {\n    return (\n      React.DOM.p({key: index}, \n        React.DOM.strong(null, message )\n      )\n    );\n  },\n\n  render: function() {\n    return (\n      React.DOM.div(null, \n        this.props.messages.map(this.renderMessage)\n      )\n    );\n  },\n\n});\n\nmodule.exports = Notice;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/components/Notice.js\n ** module id = 10\n ** module chunks = 1\n **/","/** @jsx React.DOM */\nvar React        = require('react/addons');\nvar optionsStore = require('../app.js').optionsStore;\n\nvar OptionsForm = React.createClass({displayName: 'OptionsForm',\n  mixins: [React.addons.LinkedStateMixin],\n\n  getInitialState: function() {\n    return this.props.options;\n  },\n\n  handleSubmit: function(event) {\n    event.preventDefault();\n    this.props.noticeChange('progress', 'Saving settings ...');\n\n    optionsStore.save(this.state)\n      .then(this.updateState)\n      .catch(this.showError);\n  },\n\n  handleReset: function(event) {\n    event.preventDefault();\n    var confirmed = confirm('Restore Defaults: Are you sure?');\n    if (!confirmed) return;\n\n    this.props.noticeChange('progress', 'Restoring defaults ...');\n\n    optionsStore.reset()\n      .then(this.updateState)\n      .catch(this.showError);\n  },\n\n  updateState: function() {\n    this.setState(optionsStore.getOptions());\n    this.props.noticeChange('success', 'Settings saved successfully.');\n  },\n\n  showError: function(error) {\n    this.props.noticeChange('error', error);\n  },\n\n  render: function() {\n    return (\n      React.DOM.form({onSubmit: this.handleSubmit}, \n        React.DOM.table({className: \"form-table\"}, \n          React.DOM.tbody(null, \n            React.DOM.tr(null, \n              React.DOM.th({scope: \"row\"}, \n                React.DOM.label({htmlFor: \"max\"}, \"Maximum Blur\")\n              ), \n              React.DOM.td(null, \n                React.DOM.input({type: \"number\", id: \"max\", name: \"max\", valueLink: this.linkState('max')})\n              )\n            ), \n            React.DOM.tr(null, \n              React.DOM.th({scope: \"row\"}, \n                React.DOM.label({htmlFor: \"partial\"}, \"Partial Blur\")\n              ), \n              React.DOM.td(null, \n                React.DOM.input({type: \"number\", id: \"partial\", name: \"partial\", valueLink: this.linkState('partial')})\n              )\n            ), \n            React.DOM.tr(null, \n              React.DOM.th({scope: \"row\"}, \n                React.DOM.label({htmlFor: \"tooltip\"}, \"Tooltip\")\n              ), \n              React.DOM.td(null, \n                React.DOM.input({type: \"text\", id: \"tooltip\", name: \"tooltip\", valueLink: this.linkState('tooltip')})\n              )\n            ), \n            React.DOM.tr(null, \n              React.DOM.th({scope: \"row\"}, \n                React.DOM.label({htmlFor: \"custom\"}, \"Custom Stylesheet\")\n              ), \n              React.DOM.td(null, \n                React.DOM.input({type: \"checkbox\", id: \"custom\", name: \"custom\", checkedLink: this.linkState('custom')})\n              )\n            )\n          )\n        ), \n        React.DOM.p({className: \"submit\"}, \n          React.DOM.input({name: \"submit\", className: \"button button-primary\", value: \"Save Changes\", type: \"submit\"}), \n          \" \", \n          React.DOM.input({name: \"reset\", className: \"button\", value: \"Restore Defaults\", type: \"submit\", onClick: this.handleReset})\n        )\n      )\n    );\n  }\n});\n\nmodule.exports = OptionsForm;\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/components/OptionsForm.js\n ** module id = 11\n ** module chunks = 1\n **/","// removed by extract-text-webpack-plugin\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./app/styles/app.css\n ** module id = 15\n ** module chunks = 1\n **/"],"sourceRoot":""}